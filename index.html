<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Realistic Dating Conversation Game</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
  #game { max-width: 700px; margin: auto; }
  button { margin: 5px; padding: 10px; font-size: 1em; background: #222; color: #0ff; border: 1px solid #0ff; cursor: pointer; }
  button:hover { background: #0ff; color: #111; }
  #output { margin-bottom: 20px; white-space: pre-line; }
</style>
</head>
<body>

<div id="game">
  <div id="output"></div>
  <div id="choices"></div>
</div>

<script>
let gameState = {
    step: "choosePersonality",
    personality: "",
    number: false,
    dateTime: "",
    datePlace: ""
};

const output = document.getElementById("output");
const choicesDiv = document.getElementById("choices");

function startGame() {
    gameState = { step: "choosePersonality", personality: "", number: false, dateTime: "", datePlace: "" };
    showScene();
}

function showScene() {
    choicesDiv.innerHTML = "";

    // Step 0: Choose girl
    if(gameState.step === "choosePersonality") {
        output.textContent = "Choose a girl to approach:";
        createChoices([
            ["Casual Coffee Chick", () => {gameState.personality="Casual"; gameState.step="step1"; showScene();}],
            ["Goth Girl", () => {gameState.personality="Goth"; gameState.step="step1"; showScene();}],
            ["Sporty Girl", () => {gameState.personality="Sporty"; gameState.step="step1"; showScene();}],
            ["Bookish Girl", () => {gameState.personality="Bookish"; gameState.step="step1"; showScene();}],
            ["Artsy Girl", () => {gameState.personality="Artsy"; gameState.step="step1"; showScene();}],
            ["Tech-savvy Girl", () => {gameState.personality="Tech"; gameState.step="step1"; showScene();}]
        ]);
    }

    // Step1: initial approach
    else if(gameState.step === "step1") {
        const intro = {
            "Casual": "You see a friendly girl at the coffee shop. She smiles as she sips her latte.",
            "Goth": "A mysterious goth girl sits alone in the corner, headphones in. She notices you looking.",
            "Sporty": "A sporty girl stretches by the cafe window, energetic and alert.",
            "Bookish": "A girl is reading a thick book, glasses perched on her nose.",
            "Artsy": "A girl is sketching in her notebook, surrounded by colorful art supplies.",
            "Tech": "A girl is typing away on a laptop, wearing earbuds, focused."
        };
        output.textContent = intro[gameState.personality] + "\nHow do you approach her?";
        createChoices([
            ["Say hello and introduce yourself", () => {gameState.step="step2"; showScene();}],
            ["Compliment her outfit politely", () => {gameState.step="step2"; showScene();}],
            ["Ask for the time", () => {gameState.step="step2"; showScene();}],
            ["Comment on the book or item sheâ€™s holding", () => {gameState.step="step2"; showScene();}],
            ["Mention something about the cafe atmosphere or music", () => {gameState.step="step2"; showScene();}],
            ["Ask if she comes here often", () => {gameState.step="step2"; showScene();}],
            ["Make a small observation about the weather", () => {gameState.step="step2"; showScene();}],
            ["Smile and wave casually", () => {gameState.step="step2"; showScene();}]
        ]);
    }

    // Step2: first conversation exchange
    else if(gameState.step === "step2") {
        const conv2 = {
            "Casual": "She smiles and responds warmly. Seems friendly and open to chat.",
            "Goth": "She raises an eyebrow. 'Hmm.' Seems cautious, but listening.",
            "Sporty": "She grins. 'Hey! Just finished my workout.' Energetic vibe.",
            "Bookish": "She looks up from her book. 'Oh, hi! Are you into reading too?'",
            "Artsy": "She nods at your comment, curious. 'I like talking about art.'",
            "Tech": "She glances up briefly. 'Yeah?' Looks busy but polite."
        };
        output.textContent = conv2[gameState.personality] + "\nHow do you continue the conversation?";
        createChoices([
            ["Ask about hobbies or interests", () => {gameState.step="step3"; showScene();}],
            ["Comment on her surroundings or the cafe", () => {gameState.step="step3"; showScene();}],
            ["Talk about your work/study briefly", () => {gameState.step="step3"; showScene();}],
            ["Mention a small funny story", () => {gameState.step="step3"; showScene();}],
            ["Ask about her favorite drink or snack", () => {gameState.step="step3"; showScene();}],
            ["Talk about a recent event or news", () => {gameState.step="step3"; showScene();}],
            ["Ask about pets or animals", () => {gameState.step="step3"; showScene();}],
            ["Compliment her accessories or style", () => {gameState.step="step3"; showScene();}]
        ]);
    }

    // Step3: second conversation exchange
    else if(gameState.step === "step3") {
        const conv3 = {
            "Casual": "She seems engaged and smiles more often. Conversation flowing nicely!",
            "Goth": "She nods slowly, seems a bit more interested.",
            "Sporty": "She laughs and keeps chatting with energy!",
            "Bookish": "She talks animatedly about her interests in books.",
            "Artsy": "She shows you a small sketch and talks about her art.",
            "Tech": "She listens attentively and comments thoughtfully."
        };
        output.textContent = conv3[gameState.personality] + "\nDo you try to ask for her number?";
        createChoices([
            ["Ask politely for her number", attemptNumber],
            ["Offer your number instead", attemptNumber],
            ["Suggest continuing over coffee another day", attemptNumber],
            ["Keep chatting for a bit more", () => {gameState.step="step3b"; showScene();}]
        ]);
    }

    // Step3b: optional extra chat
    else if(gameState.step === "step3b") {
        output.textContent = "You continue the conversation, finding more common ground.";
        createChoices([
            ["Ask about hobbies again", attemptNumber],
            ["Comment on surroundings or music", attemptNumber],
            ["Talk about recent experiences", attemptNumber],
            ["Mention a movie or book she might like", attemptNumber]
        ]);
    }

    // Step: schedule (time negotiation)
    else if(gameState.step === "schedule") {
        const suggestTime = ["Casual","Bookish","Artsy","Tech"];
        const askUserTime = ["Goth","Sporty"];
        if(suggestTime.includes(gameState.personality)) {
            output.textContent = "She suggests a time for the date. Do you accept?";
            createChoices([
                ["Yes, that works for me", () => {gameState.dateTime="Her suggested time"; gameState.step="place"; showScene();}],
                ["Suggest a different time", negotiateSchedule],
                ["Ask what other time works for her", negotiateSchedule],
                ["Ignore the message", "fail"]
            ]);
        } else if(askUserTime.includes(gameState.personality)) {
            output.textContent = "She asks you to suggest a time. Which do you choose?";
            createChoices([
                ["10 AM", choosePlace],
                ["2 PM", choosePlace],
                ["6 PM", choosePlace],
                ["8 PM", choosePlace],
                ["I'm good with whatever", choosePlace]
            ]);
        }
    }

    // Step: choose place
    else if(gameState.step === "place") {
        output.textContent = "Now decide on a place for the date:";
        createChoices([
            ["Coffee shop", finishDate],
            ["Casual restaurant", finishDate],
            ["Park or outdoor location", finishDate],
            ["Museum or gallery", finishDate],
            ["Bookstore", finishDate],
            ["Cafe with live music", finishDate]
        ]);
    }

    // Step: success
    else if(gameState.step === "success") {
        output.textContent = `You successfully set up a date at ${gameState.datePlace} at ${gameState.dateTime || 'the chosen time'}! Congratulations!`;
        createChoices([["Play again", startGame]]);
    }

    else if(gameState.step === "fail") {
        output.textContent = "She lost interest. Game over.";
        createChoices([["Restart", startGame]]);
    }
}

// Functions
function createChoices(options) {
    choicesDiv.innerHTML = "";
    options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt[0];
        btn.onclick = () => {
            if(typeof opt[1] === "number" || typeof opt[1] === "string") {
                gameState.step = opt[1];
                showScene();
            } else if(typeof opt[1] === "function") {
                opt[1]();
            }
        };
        choicesDiv.appendChild(btn);
    });
}

// Attempt to get number
function attemptNumber() {
    let baseChance = { "Casual":80, "Goth":30, "Sporty":70, "Bookish":60, "Artsy":55, "Tech":65 }[gameState.personality];
    if(Math.random()*100 < baseChance) gameState.step="schedule";
    else gameState.step="fail";
    showScene();
}

// Schedule negotiation
function negotiateSchedule() {
    let baseChance = { "Casual":90, "Goth":50, "Sporty":80, "Bookish":70, "Artsy":65, "Tech":75 }[gameState.personality];
    if(Math.random()*100 < baseChance) gameState.step="place";
    else gameState.step="fail";
    showScene();
}

// Choose place
function choosePlace() {
    gameState.step="place";
    showScene();
}

// Finish date
function finishDate(choice) {
    gameState.datePlace = choice ? choice : event.target.textContent;
    gameState.step="success";
    showScene();
}

startGame();
</script>

</body>
</html>
