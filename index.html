<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Realistic Confidence Builder Dating Game</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
  #game { max-width: 700px; margin: auto; }
  button { margin: 5px; padding: 10px; font-size: 1em; background: #222; color: #0ff; border: 1px solid #0ff; cursor: pointer; }
  button:hover { background: #0ff; color: #111; }
  #output { margin-bottom: 20px; white-space: pre-line; }
</style>
</head>
<body>

<div id="game">
  <div id="output"></div>
  <div id="choices"></div>
</div>

<script>
let gameState = {
    step: 0,
    confidence: 0,
    number: false,
    personality: "",
    dateTime: "",
    datePlace: ""
};

const output = document.getElementById("output");
const choicesDiv = document.getElementById("choices");

function startGame() {
    gameState = { step: "choosePersonality", confidence: 0, number: false, personality: "", dateTime: "", datePlace: "" };
    showScene();
}

function showScene() {
    choicesDiv.innerHTML = "";

    // Step: choose girl
    if(gameState.step === "choosePersonality") {
        output.textContent = "Choose a girl to approach:";
        createChoices([
            ["Casual Coffee Chick", () => {gameState.personality="Casual"; gameState.step=1; showScene();}],
            ["Goth Girl", () => {gameState.personality="Goth"; gameState.step=1; showScene();}],
            ["Sporty Girl", () => {gameState.personality="Sporty"; gameState.step=1; showScene();}],
            ["Bookish Girl", () => {gameState.personality="Bookish"; gameState.step=1; showScene();}],
            ["Artsy Girl", () => {gameState.personality="Artsy"; gameState.step=1; showScene();}],
            ["Tech-savvy Girl", () => {gameState.personality="Tech"; gameState.step=1; showScene();}]
        ]);
    }

    // Step: initial approach
    else if(gameState.step === 1) {
        const intro = {
            "Casual": "You see a friendly girl at the coffee shop. She smiles as she sips her latte.",
            "Goth": "A mysterious goth girl sits alone in the corner, headphones in. She notices you looking.",
            "Sporty": "A sporty girl stretches by the cafe window, energetic and alert.",
            "Bookish": "A girl is reading a thick book, glasses perched on her nose.",
            "Artsy": "A girl is sketching in her notebook, surrounded by colorful art supplies.",
            "Tech": "A girl is typing away on a laptop, wearing earbuds, focused."
        };
        output.textContent = intro[gameState.personality] + " How do you approach?";
        createChoices([
            ["Say hello and introduce yourself", () => {uniqueOutcome("introGreet");}],
            ["Compliment her outfit politely", () => {uniqueOutcome("outfit");}],
            ["Ask for the time", () => {uniqueOutcome("time");}],
            ["Comment on the book or item she’s holding", () => {uniqueOutcome("item");}],
            ["Mention something about the cafe atmosphere or music", () => {uniqueOutcome("music");}],
            ["Ask if she comes here often", () => {uniqueOutcome("frequent");}],
            ["Make a small observation about the weather", () => {uniqueOutcome("weather");}],
            ["Smile and wave casually", () => {uniqueOutcome("wave");}]
        ]);
    }

    // Goth intro follow-up
    else if(gameState.step === "gothIntro") {
        output.textContent = "Goth girl seems reserved. How do you continue?";
        createChoices([
            ["Ask about her favorite music", () => {gameState.step=6; output.textContent="She seems slightly more engaged."; showScene();}],
            ["Comment on her style or accessories", () => {gameState.step=6; output.textContent="She smirks, intrigued."; showScene();}],
            ["Mention a book or movie you like", () => {gameState.step=6; output.textContent="She nods thoughtfully."; showScene();}],
            ["Respectfully back off", () => {gameState.step=5; showScene();}]
        ]);
    }

    // Neutral start
    else if(gameState.step === 4) {
        output.textContent = "Neutral start. She gives a neutral response. How do you continue?";
        createChoices([
            ["Ask about her drink or food choice", 6],
            ["Make small talk about surroundings", 6],
            ["Ask about hobbies or recent activities", 6],
            ["Smile and politely excuse yourself", 5],
            ["Comment on the weather or day", 6],
            ["Ask if she’s working or studying today", 6]
        ]);
    }

    // Failed conversation
    else if(gameState.step === 5) {
        output.textContent = "You walked away. Game over.";
        createChoices([["Restart", startGame]]);
    }

    // Step: trying to get the number
    else if(gameState.step === 6) {
        output.textContent = "The conversation is going well. Try to get her number?";
        createChoices([
            ["Directly ask for her number politely", attemptNumber],
            ["Offer your number and say she can text anytime", attemptNumber],
            ["Suggest continuing the conversation over coffee another time", attemptNumber],
            ["Keep chatting for a few more minutes", increaseConfidence],
            ["Mention an event or activity she might enjoy and invite her", attemptNumber],
            ["Share an interesting article or topic and ask if she wants to discuss it later", attemptNumber]
        ]);
    }

    // Step: schedule (time negotiation)
    else if(gameState.step === "schedule") {
        const suggestTime = ["Casual","Bookish","Artsy","Tech"];
        const askUserTime = ["Goth","Sporty"];
        if(suggestTime.includes(gameState.personality)) {
            output.textContent = "She suggests a time for the date. Do you accept?";
            createChoices([
                ["Yes, that works for me", () => {gameState.dateTime="Her suggested time"; gameState.step="place"; showScene();}],
                ["Suggest a different time", negotiateSchedule],
                ["Ask what other time works for her", negotiateSchedule],
                ["Ignore the message", "fail"]
            ]);
        } else if(askUserTime.includes(gameState.personality)) {
            output.textContent = "She asks you to suggest a time. Which do you choose?";
            createChoices([
                ["10 AM", choosePlace],
                ["2 PM", choosePlace],
                ["6 PM", choosePlace],
                ["8 PM", choosePlace],
                ["I'm good with whatever", choosePlace]
            ]);
        }
    }

    // Step: choose place
    else if(gameState.step === "place") {
        output.textContent = "Now decide on a place for the date:";
        createChoices([
            ["Coffee shop", finishDate],
            ["Casual restaurant", finishDate],
            ["Park or outdoor location", finishDate],
            ["Museum or gallery", finishDate],
            ["Bookstore", finishDate],
            ["Cafe with live music", finishDate]
        ]);
    }

    // Step: success
    else if(gameState.step === "success") {
        output.textContent = `You successfully set up a date at ${gameState.datePlace} at ${gameState.dateTime || 'the chosen time'}! Congratulations!`;
        createChoices([["Play again", startGame]]);
    }

    else if(gameState.step === "fail") {
        output.textContent = "She lost interest. Game over.";
        createChoices([["Restart", startGame]]);
    }
}

// Unique outcomes per initial choice
function uniqueOutcome(action) {
    let personality = gameState.personality;
    switch(action) {
        case "introGreet":
            if(personality==="Goth") gameState.step="gothIntro";
            else gameState.step=6;
            break;
        case "outfit":
            if(personality==="Goth") gameState.step="gothIntro";
            else gameState.step=6;
            break;
        case "time":
            gameState.step=4;
            break;
        case "item":
            if(personality==="Bookish") gameState.step=6;
            else if(personality==="Tech") gameState.step=7;
            else gameState.step=6;
            break;
        case "music":
            if(personality==="Goth") gameState.step="gothIntro";
            else gameState.step=6;
            break;
        case "frequent":
            gameState.step=6;
            break;
        case "weather":
            gameState.step=6;
            break;
        case "wave":
            if(personality==="Goth") gameState.step="gothIntro";
            else gameState.step=6;
            break;
    }
    showScene();
}

function createChoices(options) {
    choicesDiv.innerHTML = "";
    options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt[0];
        btn.onclick = () => {
            if(typeof opt[1] === "number" || typeof opt[1] === "string") {
                gameState.step = opt[1];
                showScene();
            } else if(typeof opt[1] === "function") {
                opt[1]();
            }
        };
        choicesDiv.appendChild(btn);
    });
}

function attemptNumber() {
    let baseChance = { "Casual":45, "Goth":20, "Sporty":40, "Bookish":35, "Artsy":30, "Tech":40 }[gameState.personality];
    let chance = baseChance + gameState.confidence;
    if(Math.random()*100 < chance) gameState.step="schedule";
    else gameState.step="fail";
    showScene();
}

function increaseConfidence() {
    gameState.confidence += 20;
    gameState.step = 6;
    showScene();
}

function negotiateSchedule() {
    let baseChance = { "Casual":50, "Goth":30, "Sporty":45, "Bookish":40, "Artsy":35, "Tech":45 }[gameState.personality];
    let chance = baseChance + gameState.confidence;
    if(Math.random()*100 < chance) gameState.step="place";
    else gameState.step="fail";
    showScene();
}

function choosePlace() {
    gameState.step="place";
    showScene();
}

function finishDate(choice) {
    gameState.datePlace = choice ? choice : event.target.textContent;
    gameState.step="success";
    showScene();
}

startGame();
</script>

</body>
</html>
